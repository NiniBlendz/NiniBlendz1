<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nini Blendz Calendar</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<style>
body{font-family:sans-serif; background:#111; color:#fff; text-align:center; padding:30px;}
h1{color:#c59d5f;}
#calendar{max-width:300px; margin:auto;}
.booked-dates{margin-top:20px;}
.booked-dates span{display:inline-block; background:#c59d5f; color:#000; padding:5px 10px; margin:3px; border-radius:5px; cursor:pointer;}
.booked-dates span:hover{background:#fff;}
</style>
</head>
<body>

<h1>Nini Blendz - Booking Calendar</h1>
<p>Click a date to mark it as booked/unbooked</p>

<input id="calendar" placeholder="Select a date" readonly>
<div class="booked-dates" id="bookedDatesContainer"></div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
let bookedDates = JSON.parse(localStorage.getItem('bookedDates')) || [];
const bookedContainer = document.getElementById('bookedDatesContainer');

function renderBookedDates(){
  bookedContainer.innerHTML = '';
  bookedDates.forEach(date => {
    const span = document.createElement('span');
    span.textContent = date;
    span.title = "Click to remove booking";
    span.onclick = () => {
      bookedDates = bookedDates.filter(d => d !== date);
      localStorage.setItem('bookedDates', JSON.stringify(bookedDates));
      renderBookedDates();
      calendar.set('disable', bookedDates.map(d => new Date(d)));
    };
    bookedContainer.appendChild(span);
  });
}

// Initialize Flatpickr
const calendar = flatpickr("#calendar", {
  minDate: "today",
  dateFormat: "F j, Y",
  disable: bookedDates.map(d => new Date(d)),
  onChange: function(selectedDates, dateStr){
    if(!dateStr) return;
    if(!bookedDates.includes(dateStr)){
      bookedDates.push(dateStr);
    } else {
      bookedDates = bookedDates.filter(d => d !== dateStr);
    }
    localStorage.setItem('bookedDates', JSON.stringify(bookedDates));
    renderBookedDates();
    calendar.set('disable', bookedDates.map(d => new Date(d)));
  }
});

renderBookedDates();
</script>

</body>
</html>
